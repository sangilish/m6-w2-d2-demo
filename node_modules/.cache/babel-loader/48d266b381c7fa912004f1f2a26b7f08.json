{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\n// 비동기 thunk 액션 생성자\nexport const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {\n  const response = await fetch('/api/todos');\n  const data = await response.json();\n  return data.todos;\n});\nconst initialState = {\n  status: 'idle',\n  entities: [],\n  error: null\n};\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState,\n  reducers: {\n    todoAdded: {\n      reducer(state, action) {\n        state.entities.push(action.payload);\n      },\n      prepare(text) {\n        return {\n          payload: {\n            id: Date.now(),\n            text,\n            completed: false,\n            color: null\n          }\n        };\n      }\n    },\n    todoToggled(state, action) {\n      const todo = state.entities.find(todo => todo.id === action.payload);\n      if (todo) {\n        todo.completed = !todo.completed;\n      }\n    },\n    todoColorSelected(state, action) {\n      const {\n        todoId,\n        color\n      } = action.payload;\n      const todo = state.entities.find(todo => todo.id === todoId);\n      if (todo) {\n        todo.color = color;\n      }\n    },\n    todoDeleted(state, action) {\n      const index = state.entities.findIndex(todo => todo.id === action.payload);\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    allTodosCompleted(state) {\n      state.entities.forEach(todo => {\n        todo.completed = true;\n      });\n    },\n    completedTodosCleared(state) {\n      state.entities = state.entities.filter(todo => !todo.completed);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchTodos.pending, state => {\n      state.status = 'loading';\n    }).addCase(fetchTodos.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.entities = action.payload;\n    }).addCase(fetchTodos.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    });\n  }\n});\nexport const {\n  todoAdded,\n  todoToggled,\n  todoColorSelected,\n  todoDeleted,\n  allTodosCompleted,\n  completedTodosCleared\n} = todosSlice.actions;\nexport const selectTodoIds = state => state.todos.entities.map(todo => todo.id);\nexport const selectTodoById = (state, todoId) => state.todos.entities.find(todo => todo.id === todoId);\nexport const selectTodos = state => state.todos.entities;\nexport const selectTodoStatus = state => state.todos.status;\nexport const selectTodoError = state => state.todos.error;\nexport const selectFilteredTodos = state => {\n  const todos = selectTodos(state);\n  const {\n    status,\n    colors\n  } = state.filters;\n  const showAll = status === 'all';\n  const showCompleted = status === 'completed';\n  return todos.filter(todo => {\n    const statusMatches = showAll || (showCompleted ? todo.completed : !todo.completed);\n    const colorMatches = colors.length === 0 || todo.color && colors.includes(todo.color);\n    return statusMatches && colorMatches;\n  });\n};\nexport const selectFilteredTodoIds = state => selectFilteredTodos(state).map(todo => todo.id);\nexport default todosSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchTodos","response","fetch","data","json","todos","initialState","status","entities","error","todosSlice","name","reducers","todoAdded","reducer","state","action","push","payload","prepare","text","id","Date","now","completed","color","todoToggled","todo","find","todoColorSelected","todoId","todoDeleted","index","findIndex","splice","allTodosCompleted","forEach","completedTodosCleared","filter","extraReducers","builder","addCase","pending","fulfilled","rejected","message","actions","selectTodoIds","map","selectTodoById","selectTodos","selectTodoStatus","selectTodoError","selectFilteredTodos","colors","filters","showAll","showCompleted","statusMatches","colorMatches","length","includes","selectFilteredTodoIds"],"sources":["/Users/sangiljung/Desktop/Westcliff/WEB 603/W6/W6_D2/m6-w2-d2-demo/src/features/todos/todosSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\n// 비동기 thunk 액션 생성자\nexport const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {\n  const response = await fetch('/api/todos');\n  const data = await response.json();\n  return data.todos;\n});\n\nconst initialState = {\n  status: 'idle',\n  entities: [],\n  error: null\n};\n\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState,\n  reducers: {\n    todoAdded: {\n      reducer(state, action) {\n        state.entities.push(action.payload);\n      },\n      prepare(text) {\n        return {\n          payload: {\n            id: Date.now(),\n            text,\n            completed: false,\n            color: null,\n          },\n        };\n      },\n    },\n    todoToggled(state, action) {\n      const todo = state.entities.find((todo) => todo.id === action.payload);\n      if (todo) {\n        todo.completed = !todo.completed;\n      }\n    },\n    todoColorSelected(state, action) {\n      const { todoId, color } = action.payload;\n      const todo = state.entities.find((todo) => todo.id === todoId);\n      if (todo) {\n        todo.color = color;\n      }\n    },\n    todoDeleted(state, action) {\n      const index = state.entities.findIndex((todo) => todo.id === action.payload);\n      if (index !== -1) {\n        state.entities.splice(index, 1);\n      }\n    },\n    allTodosCompleted(state) {\n      state.entities.forEach((todo) => {\n        todo.completed = true;\n      });\n    },\n    completedTodosCleared(state) {\n      state.entities = state.entities.filter((todo) => !todo.completed);\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchTodos.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(fetchTodos.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.entities = action.payload;\n      })\n      .addCase(fetchTodos.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const {\n  todoAdded,\n  todoToggled,\n  todoColorSelected,\n  todoDeleted,\n  allTodosCompleted,\n  completedTodosCleared,\n} = todosSlice.actions;\n\nexport const selectTodoIds = (state) => state.todos.entities.map((todo) => todo.id);\nexport const selectTodoById = (state, todoId) => \n  state.todos.entities.find((todo) => todo.id === todoId);\nexport const selectTodos = (state) => state.todos.entities;\nexport const selectTodoStatus = (state) => state.todos.status;\nexport const selectTodoError = (state) => state.todos.error;\n\nexport const selectFilteredTodos = (state) => {\n  const todos = selectTodos(state);\n  const { status, colors } = state.filters;\n\n  const showAll = status === 'all';\n  const showCompleted = status === 'completed';\n\n  return todos.filter((todo) => {\n    const statusMatches =\n      showAll || (showCompleted ? todo.completed : !todo.completed);\n    const colorMatches =\n      colors.length === 0 || (todo.color && colors.includes(todo.color));\n    return statusMatches && colorMatches;\n  });\n};\n\nexport const selectFilteredTodoIds = (state) =>\n  selectFilteredTodos(state).map((todo) => todo.id);\n\nexport default todosSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}